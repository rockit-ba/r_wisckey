# r_wisckey
rust 实现基于 基本的log（区别于传统的关系型数据库的page存储）存储的kv存储引擎

=====================================================
示例：

服务启动：

```
cargo run --bin wisc_server
```
客户端命令启动：

```
cargo run --bin wisc_client
```
命令行：

    wisc-db>> get 桐人;

`delete`  `insert` `update` 类似。

==============================================================

目前另外的一个明显缺点是我们在添加数据到文件中的时候是随机写的， 即每次用户的修改操作都会立即`flush`到磁盘，因此，我们想要添加 `write_buf` ，进行顺序写，以提高性能。

顺序写带来的问题是数据丢失的问题，因此我们还需要添加 `WAL` 日志，防止意外情况发生之后的故障恢复。

## **current version**： `0.3.0`：顺序写、WAL、故障恢复。

**顺序写**：我们利用write_buf，当buf数据达到阈值的时候，我们进行flush。代码实现：`persistence.rs` 。

**WAL**：我们只添加修改数据点的相关命令，而不涉及查询相关，并且选择了更简易的 命令字符串 log。方法： `write_ahead_log`。

**故障恢复**：我们只需在服务启动时读取所有的xlog 文件并且重演即可。方法： `try_recovery`。

**check_point**：为了加速故障恢复我们需要定时执行check_point操作。 方法：`check_point`。

======================================================================

**log:**

`fix-bug-0.1.0`-在append方法中添加文件大小限制

`add`-添加配置文件

`add`-添加服务端，客户端命令行

`add`-添加数据文件压缩

`add`-添加顺序写

`add`-添加WAL

`add`-添加故障恢复

`add`-添加check_point